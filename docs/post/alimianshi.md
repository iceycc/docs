## 每日一题

## 1 传统布局和flex布局打区别

### 传统布局
* 盒模型
* 定位布局   position
* 浮动布局   float
* 传统文档流  display
优点：
* 能够做的低版本浏览器的兼容
缺点：
* 代码量大
* 实现一些特殊布局困难，比如垂直剧中，响应式
* 坑点多
* 比较适合做pc端项目
### flex布局
* 弹性盒子
css3的内容，通过控制子盒子来完成布局
* 传统布局实现垂直居中这种特殊布局时相对比较复杂，而flex布局的出现使得实现特殊布局尤其是响应式布局变得更加灵活方便，可以自由设置排列方向，排列顺序，对齐方式，如何换行等
* flex弹性布局，只有四个概念：父容器 子容器 主轴 交叉轴
* 个人原创总结，大家轻拍：传统布局是基于盒模型通过 display，position，float，这些属性的配置来实现网页布局，还原设计稿，如果非得加一个，我还会说说TABLE布局，也算一种。这些布局方式，兼容性好，历史悠久，被广泛用于各种网页排版中，比如双飞燕，圣杯等。但随着电脑的发展，各种终端的涌现，传统布局在前端开发中，出现了很多不方便的地方，老美于2009年，在CSS3标准中，创立了flex布局，故名思意，它是很适合当下的响应式布局发展方向，特别是在对齐，自动适应宽度，布局方向这些地方，通过属性配置，很容易的实现了，传统盒模型所难已达到的的效果，深受前端工程师喜欢，但不过，由于PC终端浏览器产品历史悠久，对CSS3这个新的display:flex的兼容，很不一样，所以在PC端，为了兼容几乎不怎么使用，除非产品定义在高级别浏览器上，在移动端现在的Android4+上，支持的比较好，在注意一些小细节的情况下，比如子元素的display:block这样的问题，大家可以放心使用。总体来说，它的出现是为了适合响应式的WEB前端发展方向而产生，看产品的要求及定位使用而选择使用。


## 2、vue的双向数据绑定的原理是怎么实现的，详细描述什么时候监听变化的，什么时候触发变化的？
Vue双向数据绑定：
我所理解的双向数据绑定无非就是在单向数据绑定的基础上给可输入元素，比如input和textarea添加监听事件来动态修改model和view，其最核心的方法就是通过Object.defineProperty()来实现对对属性的劫持，达到监听数据变化的目的。
要实现mvvm双向数据版绑定， 我觉得需要实现以下几点：
1.实现一个数据监听器Observer,能够对数据对象的所有属性进行监听，如有变动可以拿到最新值并通知订阅者。
2.实现一个指令解析器Compiler，对每个元素节点的指令扫描并解析，根据指令模板替换数据，并且绑定相应的更新函数。
3.实现一个watcher，其作为连接Observer和Compiler的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的回调函数从而更新视图
4.MVVM作为入口函数，整个以上三者

5af8eb55f265da0b814ba766  视频
https://pan.baidu.com/s/1Zi7axziluvmdP7XLd7-jWg 密码：31b3

## 3、比较两个颜色的相似度
> 这是一道开放题目，首先将颜色拆分成r/g/b三个值，如果是字符串的颜色如#aabbff或者rgb(255,128,100)可以用正则表达式取出对应的r/g/b值。对于16进制字符串，可以使用parseInt('0xaa')转10进制整数。然后对于两个颜色，可以使用距离 Math.sqrt( (r1-r2) *(r1-r2) +(g1-g2)*(g1-g2)+(b1-b2)*(b1-b2) )进行比较， 距离近则相似。 当然可以用Math.hypot( r1-r2, g1-t2, b1-b2) 来简化上述运算。
> 这道题目主要考察学员的知识积累和思考。 首先要知道rgb是颜色的组成。 然后要给出一种可行的比较方法。 最后要考察具体javascript细节函数的运用

* 阿里 
* 颜色基本组成
* RGB 正方体  计算器 离散 解析
* 000 - 111 对角线 亮度 垂直面 锥形 圆环
* 加权求距离  人对绿色更敏感 权重高
* 人工智能 神经 计算 权重
* 错误 转换十六进制 相减
* RGB 平方做差 加权平均值
* 饱和度 亮点 
* 计算机视觉 面试 人对颜色低理解 不同人种对颜色低认真差异不同

## 4 业务题
问题：一个单页面应用，有6张页面，F、E、A、B、C、D。 页面ABCD构成了一个冗长的用户验证过程。目前A、B、C对应用户验证过程的第1步，第2步，第3步。 页面F是首页，E是某张业务相关页面。用户到达页面E后，系统发现用户没有认证，触发验证流程，到达页面A，然后开始A->B->C->D流程。 页面D是验证结果页面（验证成功页面）。 请问，如果到达页面D后，如何让用户点击返回可以返回页面F，而忽略中间流程（注：用户可能根本没有到达过F，比如微信分享直接进入了E）。
补充下： 场景是上述场景，最好能做到到达页面D后，浏览器自然返回是F，再按返回，单页面系统退出；另外请思考下各个流程如何实现流畅切换，不会有中间闪烁的页面。


答案： 这个问题初一看是对单页面路由架构的考察。也是一个很好的引入问题，可以考察非常多方面。 比如说：如何实现页面切换动画？ A、B、C都是表单的话，如何缓存用户输入完成的表单数据？……回到问题，因为history api提供了push/pop/replace三种操作，无论是其中的任何一种都无法实现上述的效果。 一个路由系统，首先要监听浏览器地址的变化，然后根据变化渲染不同的页面。1. 在页面到达D后，关闭对路由变化页面渲染的监听。 2. 路由系统要进行多次POP，可以用history.go(-n)实现； 3. 路由栈清空到只剩下一张页面时，将这张页面替换为F。 4. PUSH一张页面D。 5. 如果在HTML上有一个类似「轮播图」的设计，就是每一张页面是一张轮播图，将轮播图设置成只有「F」和「D」。 5. 恢复路由监听。 这个问题的另一个考点是，在上述完整的计算过程当中，需要知道当前历史记录中的页面数，页面数可以通过localStorage实现，在ls中维护一个变量，每次push的时候+1，并写入history.state。 POP的时候读取history.state将变量重置。

* 单页面路由
* 单页面，div部分改变 -- 路由改变就是replace浏览记录会被replace掉  
* push可以返回
* go()

## 5 算法题
问题 一个无序正负项 数组，
eg:[3, -6, 123, -945, -231, 112]
找出其中的最大的连续子序列

有如下乱序数组 A1, A2, A3, A4,........An, 求 i, j (1<= i <= j<= n), 使得Ai +  .... + Aj 和最大, 输出i j


## 6 请你说说函数防抖和函数节流的应用场景和原理?
防抖  应用场景，比如一个输入框 输入文字请求数据 输入的时候每变化一次就请求一次 这就需要用防抖了   节流  比如下拉加载更多请求接口，这就需要用到节流了，每隔多少秒去执行一次     防抖的实现原理是  比如300毫秒的间隔时间，如果没有到300毫秒又输入内容那么重新计算着300 秒时间 等什么时候停止输入 再去请求数据，  节流是 比如下拉加载数据 同样时间是300毫秒 触发  就是第一次请求数据  隔300 毫秒再去请求数据

函数节流(throttle)：限制一定时间内只能执行一次
应用场景：下拉刷新，屏幕滚动
设置一个变量，判断函数是否可以执行，false时直接退出，设置间隔时间
````javascript
function throttle(fn, interval = 300) {
    let canRun = true;
    return function () {
        if (!canRun) return;
        canRun = false;
        setTimeout(() => {
            fn.apply(this, arguments);
            canRun = true;
        }, interval);
    };
}
````
函数防抖(debounce)：连续，当两次函数触发大于一定时间时真正触发函数
````javascript
function debounce(fn, interval = 300) {
    let timeout = null;
    return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
            fn.apply(this, arguments);
        }, interval);
    };
}
````

## 7 场景面试
电商网站A和电影票网站B合作，A的用户，可以通过A网站下单购买电影票，之后跳转跳转到B（不需要登录）去选座位。 如果A、B是同域名，比如a.domain.com,b.domain.com能不能共享cookie?如果不同域如何处理？




## 8 请说说什么是XSS?如何攻击？如何防御?
内容安全策略 (CSP) 是一个额外的安全层，用于检测并削弱某些特定类型的攻击，包括跨站脚本 (XSS) 和数据注入攻击等。无论是数据盗取、网站内容污染还是散发恶意软件，这些攻击都是主要的手段。
我们可以通过 CSP 来尽量减少 XSS 攻击。CSP 本质上也是建立白名单，规定了浏览器只能够执行特定来源的代码。
通常可以通过 HTTP Header 中的 Content-Security-Policy 来开启 CSP
只允许加载本站资源
只允许加载 HTTPS 协议图片
允许加载任何来源框架
`Content-Security-Policy:default-src 'self'`
`Content-Security-Policy:img-src 'https://'`
`Content-Security-Policy:child-src 'none'`
https://content-security-policy.com/
https://eggjs.org/zh-cn/core/security.html


## 9 说说csrf，什么是csrf，怎么防范它？
[参考链接1](https://juejin.im/post/5b6b08956fb9a04fc67c2263)

如何防御
防范 CSRF 可以遵循以下几种规则：
Get 请求不对数据进行修改
不让第三方网站访问到用户 Cookie
阻止第三方网站请求接口
请求时附带验证信息，比如验证码或者 token
#SameSite
可以对 Cookie 设置 SameSite 属性。该属性设置 Cookie 不随着跨域请求发送，该属性可以很大程度减少 CSRF 的攻击，但是该属性目前并不是所有浏览器都兼容。
#验证 Referer
对于需要防范 CSRF 的请求，我们可以通过验证 Referer 来判断该请求是否为第三方网站发起的。
#Token
服务器下发一个随机 Token（算法不能复杂），每次发起请求时将 Token 携带上，服务器验证 Token 是否有效。

## 10 如果发现在某个用户的电脑上，网站的静态资源打不开了，如何确定是CDN的问题还是那个用户机器、浏览器的问题？


## 11 请说说在hybrid端实现类似原生般流畅的体验，要注意哪些事项。

## 12 https抓包的原理是什么？平时你用什么工具？如何抓包？

## 13 什么是无头浏览器
## 14 请说一下V8下的垃圾回收机制
## 15 请说一下对执行上下文的理解
当执行 JS 代码时，会产生三种执行上下文
全局执行上下文
函数执行上下文
eval 执行上下文

